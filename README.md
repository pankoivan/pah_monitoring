# pah_monitoring
Дипломная работа. Web-приложение для мониторинга состояния пациентов с лёгочной артериальной гипертензией.

_______

**База данных**

Всего база данных содержит 33 таблицы, из которых 17 так или иначе связаны с информацией о ходе лечения пациентов:
- 12 хранят собранную от пациентов информацию о показателях здоровья (давление, спирометрия, кашель и т.д.) и результатах пройденных тестов / опросников (Т6МХ, общее самочувствие, физические изменения и т.д.);
- 1 хранит информацию об анамнезе пациента;
- 1 хранит информацию о файлах с результатами анализов, загруженных пациентами на сервер;
- 1 хранит расписания сбора показателей, назначаемые пациентам их лечащими врачами;
- 2 предназначены для хранения информации о наградах пациентов: одна таблица непосредственно со всеми доступными в приложении наградами, вторая - *"Many-to-many"*-таблица для связи пациентов и наград.

Для удобства просмотра схема базы данных разбита на две части.

Первая часть. Содержит пару таблиц из приведённого выше описания (*chest_pain* и *liquid*) и остальные таблицы: пользователи, отпуска, больничные, увольнения, коды безопасности регистрации и т.д.
![Первая часть](https://github.com/user-attachments/assets/927bd989-f75a-4048-9b7a-1a91fddcdb97)
Вторая часть. Содержит все описанные выше таблицы, кроме *chest_pain* и *liquid*. Оборванные на рисунке связи идут к первой части схемы базы данных.
![Вторая часть](https://github.com/user-attachments/assets/51e76912-1be7-4587-a80c-2bf739e9243a)

**Архитектура**

Приложение сочетает в себе архитектуры MVC и REST. Ниже описано их использование.

MVC. Запрос пользователем страниц:

- при переходе по страницам;
- при редиректе на страницу.

REST. Обмен данными с клиентским JavaScript-кодом:

- при отправке на сервер JSON с собранной из input-форм информацией при добавлении / редактировании сущностей;
- при отправке на сервер JSON с идентификатором сущности для её удаления;
- при приёме клиентом ответного JSON с информацией о сохранённом / изменённом объекте;
- при запросе клиентом данных в виде JSON для их отображения в виде таблиц и графиков.

На рисунке приведена иллюстрация архитектуры приложения.
![image](https://github.com/user-attachments/assets/1e26055f-9050-4378-8c7a-488ec0ff09c0)

**Серверная часть**

Серверная часть состоит из четырёх стандартных слоёв, которые также можно увидеть на рисунке выше.

1) Сущности. Описание таблиц базы данных в виде классов для осуществления ORM.
2) Репозитории. Основные действия над базой данных, прежде всего - CRUD-операции.
3) Сервисы. Бизнес-логика приложения.
4) Контроллеры. Обмен данными между клиентом и сервером.

Чтобы упростить обмен данными с клиентской частью, на сервере задействуются DTO-сущности, предусмотренные как для приёма, так и для выдачи данных.

Для тех сущностей, которые выдаются пользователю в виде списков (медицинские учреждения, администраторы, врачи и т.д.), имеются специальные классы-фильтры, решающие следующие задачи:

1) Поиск в соответствии с указанной пользователем подстрокой
2) Фильтрация в соответствии с указанными пользователем критериями
3) Сортировка по указанным пользователем признакам
4) Пагинация в соответствии с конкретным запрошенным пользователем номером страницы

Также есть две задачи, которые на сервере выполняются по расписанию:

- удаление из базы данных просроченных кодов безопасности регистрации;
- выдача пациентам наград за прохождение прогрессии в отправке показателей.
