# pah_monitoring
Дипломная работа: Web-приложение для мониторинга состояния пациентов с лёгочной артериальной гипертензией.

_______

**Общая информация**

Разработанное Web-приложение позволяет врачам и пациентам сосредоточить своё внимание на симптомах и показателях здоровья, специфичных для лёгочной артериальной гипертензии, и обеспечивает удобное графическое представление данных.

Ту информацию, которую приложение получает из опросников (кашель, головокружение, общее самочувствие и другие), оно отображает пользователю в табличном виде.

Числовые данные (артериальное давление, пульс, вес и другие) приложение визуализирует как в виде таблиц, так и в виде графиков.

На рисунке представлены основные функции, предоставляемые приложением пользователям в соответствии с их ролями.

![UseCase](https://github.com/user-attachments/assets/8feaf8f5-4437-4b47-80ee-e561c7205e19)

_______

**База данных**

Всего база данных содержит 33 таблицы, из которых 17 так или иначе связаны с информацией о ходе лечения пациентов:

- 12 хранят собранную от пациентов информацию о показателях здоровья (давление, спирометрия, пульсоксиметрия и т.д.) и результатах пройденных тестов / опросников (Т6МХ, общее самочувствие, физические изменения и т.д.);
- 1 хранит информацию об анамнезах пациентов;
- 1 хранит информацию о файлах с результатами анализов, загруженных пациентами на сервер;
- 1 хранит расписания сбора показателей, назначаемые лечащими врачами своим пациентами;
- 2 предназначены для хранения информации о наградах пациентов: одна таблица непосредственно со всеми доступными в приложении наградами, вторая - *"Many-to-many"*-таблица для связи пациентов и наград.

Для удобства просмотра схема базы данных разбита на две части.

Первая часть. Содержит пару таблиц из приведённого выше описания (*chest_pain* и *liquid*) и остальные таблицы: пользователи, отпуска, больничные, увольнения, коды безопасности регистрации в приложении и т.д.

![Первая часть](https://github.com/user-attachments/assets/927bd989-f75a-4048-9b7a-1a91fddcdb97)

Вторая часть. Содержит все описанные выше таблицы, кроме *chest_pain* и *liquid*. Оборванные на рисунке связи идут к первой части схемы базы данных.

![Вторая часть](https://github.com/user-attachments/assets/51e76912-1be7-4587-a80c-2bf739e9243a)

_______

**Архитектура**

Приложение сочетает в себе архитектуры MVC и REST. Далее подробно описаны области их применения в соответствии с действиями пользователя.

MVC. Запрос пользователем страниц:

- при простой навигации по страницам приложения;
- при редиректе на страницу после какого-нибудь действия.

REST. Обмен данными с клиентским JavaScript-кодом:

- при отправке на сервер JSON с собранной из input-форм информацией для добавления / редактирования сущностей;
- при отправке на сервер JSON с идентификатором сущности для её удаления;
- при приёме клиентом ответного JSON с информацией о добавленной / отредактированной сущности;
- при запросе клиентом данных в виде JSON для их отображения в виде таблиц и графиков.

Приведённый ниже рисунок иллюстрирует архитектуру приложения.

![image](https://github.com/user-attachments/assets/1e26055f-9050-4378-8c7a-488ec0ff09c0)

_______

**Серверная часть**

Серверная часть приложения состоит из четырёх глобальных групп классов (слоёв), описанных ниже. Их также можно увидеть на рисунке архитектуры приложения.

1) Сущности. Представляют собой описание таблиц базы данных в виде классов для осуществления ORM.
2) Репозитории. Описывают действия над базой данных, прежде всего - CRUD-операции.
3) Сервисы. Содержат в себе практически всю основную логику приложения.
4) Контроллеры. Предназначены для обмена данными между клиентом и сервером.

На серверной стороне приложения активно используются DTO-сущности, предусмотренные как для приёма, так и для выдачи данных. Входные DTO содержат только те поля, которые необходимы серверу для добавления / изменения сущностей. Выходные, в свою очередь, состоят из тех полей, которые достаточны для выдачи клиенту всей ожидаемой им информации.

Для сущностей, выдаваемых пользователю в виде списков (медицинские учреждения, администраторы, врачи и т.д.), имеются специальные классы-фильтры, решающие следующие задачи:

1) Поиск в соответствии с указанной пользователем подстрокой.
2) Фильтрация в соответствии с указанными пользователем критериями.
3) Сортировка по указанным пользователем признакам.
4) Пагинация в соответствии с конкретным запрошенным пользователем номером страницы.

Также есть две задачи, которые на сервере выполняются по расписанию:

- удаление просроченных кодов безопасности регистрации из базы данных;
- выдача пациентам наград за прохождение прогрессии в отправке показателей.

Приложением предусмотрена отправка писем на электронные почты пользователей в следующих случаях:

- выдача кода безопасности регистрации (для администраторов, врачей и пациентов);
- назначение / смена лечащего врача (для пациентов);
- уведомление о получении награды (для пациентов).

_______

**Клиентская часть**

Практически весь стиль пользовательского интерфейса приложения определён Web-фреймворком *Bootstrap*: цвета фона и текста, модальные окна, отступы элементов и прочее.

Все действия пользователя, направленные на добавление / изменение / удаление сущностей, осуществляются JavaScript-кодом, посылающим на сервер JSON со всей необходимой информацией на соответствующие эндпоинты.

Другая, более интересная задача, решаемая клиентскими скриптами, - использование библиотек для удобной графической визуализации данных о показателях пациента.

Для отображения данных в виде таблиц используется Grid.js, в виде графиков - Char.js
